---
date: '2025-07-01 16:04:49'
layout: 'post'
meta:
- charset: 'utf-8'
- content: 'TeX4ht (https://tug.org/tex4ht/)'
  name: 'generator'
- content: 'width=device-width,initial-scale=1'
  name: 'viewport'
- content: '2025-07-01-setup-blog-with-github-actions.tex'
  name: 'src'
styles:
- '2025-07-01-setup-blog-with-github-actions.css'
time: 1751385889
title: 'Setup Blog with GitHub Actions'
updated: 1755808421
---


<!--   l. 9   --><p class='indent'>   This article describes how to configure GitHub Actions to automatically compile
LaTeX sources for a static blog built with tools like <span class='ec-lmtt-10'>make4ht </span>and Jekyll. It covers file
tracking, automatic build triggering, and committing generated files back to the
repository.
</p><!--   l. 13   --><p class='indent'>   You can find the YAML configuration in the <a href='https://github.com/michal-h21/testblog/blob/main/.github/workflows/main.yml'>.github/workflows/main.yml</a>
file.

</p>   
<h3 class='likesectionHead' id='contents'><a id='x1-1000'></a>Contents</h3>
<div class='tableofcontents'>   
<span class='sectionToc'>1 <a href='#problem-git-and-modification-times' id='QQ2-1-2'>Problem: Git and Modification Times</a></span>
<br />   <span class='subsectionToc'>1.1 <a href='#restoring-timestamps-with-github-actions' id='QQ2-1-3'>Restoring Timestamps with GitHub Actions</a></span>
<br />   <span class='sectionToc'>2 <a href='#working-with-multiple-branches' id='QQ2-1-4'>Working with Multiple Branches</a></span>
<br />   <span class='sectionToc'>3 <a href='#compiling-latex-on-github' id='QQ2-1-5'>Compiling LaTeX on GitHub</a></span>
<br />   <span class='subsectionToc'>3.1 <a href='#using-a-marker-file-to-trigger-compilation' id='QQ2-1-6'>Using a Marker File to Trigger Compilation</a></span>
<br />   <span class='subsectionToc'>3.2 <a href='#compilation-with-texlive-action' id='QQ2-1-7'>Compilation with TexLive Action</a></span>
<br />   <span class='sectionToc'>4 <a href='#committing-generated-files-back-to-github' id='QQ2-1-8'>Committing Generated Files Back to GitHub</a></span>
<br />   <span class='sectionToc'>5 <a href='#configure-github-pages' id='QQ2-1-9'>Configure Github Pages</a></span>
<br />   <span class='sectionToc'>6 <a href='#preventing-infinite-build-loops' id='QQ2-1-11'>Preventing Infinite Build Loops</a></span>
</div>   

<h3 class='sectionHead' id='problem-git-and-modification-times'><span class='titlemark'>1   </span> <a id='x1-20001'></a>Problem: Git and Modification Times</h3>
<!--   l. 21   --><p class='noindent'>Git does not preserve file modification times when cloning or checking out
repositories. However, tools like <span class='ec-lmtt-10'>make4ht </span>or other build systems may rely on these
timestamps to detect changed files. To compile only updated LaTeX sources, we need
to <span class='ec-lmri-10'>restore original modification times </span>from the commit history.
                                                                  

                                                                  

</p>   
<h4 class='subsectionHead' id='restoring-timestamps-with-github-actions'><span class='titlemark'>1.1   </span> <a id='x1-30001.1'></a>Restoring Timestamps with GitHub Actions</h4>
<!--   l. 28   --><p class='noindent'>We can restore modification times using a custom script that extracts timestamps
from git history:
                                                                  

                                                                  
</p>   
<pre class='verbatim' id='verbatim-1'>
- name: Restore timestamps
  run: |
    git ls-files -z | while read -d ’’ file; do
      if [ -f "$file" ]; then
        timestamp=$(git log --pretty=format:%cd -n 1 --date=iso -- "$file")
        if [ -n "$timestamp" ]; then
          touch -d "$timestamp" "$file"
        fi
      fi
    done
</pre>
<!--   l. 41   --><p class='nopar'>
</p><!--   l. 43   --><p class='indent'>   This requires the full commit history, not just the latest commit. You must ensure
the following step is included in your GitHub Actions workflow:
                                                                  

                                                                  
</p>   
<pre class='verbatim' id='verbatim-2'>
- uses: actions/checkout@v4
  with:
    fetch-depth: 0
</pre>
<!--   l. 50   --><p class='nopar'>
</p><!--   l. 52   --><p class='indent'>   This fetches the complete Git history so the script can determine modification
times correctly.

</p>   
<h3 class='sectionHead' id='working-with-multiple-branches'><span class='titlemark'>2   </span> <a id='x1-40002'></a>Working with Multiple Branches</h3>
<!--   l. 56   --><p class='noindent'>For better organization, we use two branches: </p>
<ul class='itemize1'>     
<li class='itemize'><span class='ec-lmtt-10'>main </span>branch: Contains source LaTeX files and build scripts
</li>
<li class='itemize'><span class='ec-lmtt-10'>html </span>branch: Contains generated HTML files served by GitHub Pages</li></ul>
<!--   l. 62   --><p class='indent'>   The workflow checks out both branches and synchronizes changes from <span class='ec-lmtt-10'>main </span>to
<span class='ec-lmtt-10'>html </span>before compilation.

</p>   
<h3 class='sectionHead' id='compiling-latex-on-github'><span class='titlemark'>3   </span> <a id='x1-50003'></a>Compiling LaTeX on GitHub</h3>
<!--   l. 66   --><p class='noindent'>It is possible to run the full LaTeX to HTML compilation process directly on
GitHub, without needing to generate files locally.

</p>   
<h4 class='subsectionHead' id='using-a-marker-file-to-trigger-compilation'><span class='titlemark'>3.1   </span> <a id='x1-60003.1'></a>Using a Marker File to Trigger Compilation</h4>
<!--   l. 71   --><p class='noindent'>To control whether a file should be rebuilt, we use a marker file named after the
source file with the extension <span class='ec-lmtt-10'>.published</span>. It stores the timestamp of the last
successful publication.
                                                                  

                                                                  
</p><!--   l. 74   --><p class='indent'>   It is created automatically if you use the <span class='ec-lmtt-10'>staticsite </span>extension, but you can also
create it manually, if you want to compile your file only on Github, without local
testing.
</p><!--   l. 77   --><p class='indent'>   For example, for a file named <span class='ec-lmtt-10'>tex_filename.tex</span>, create a corresponding marker
file:
                                                                  

                                                                  
</p>   
<pre class='verbatim' id='verbatim-3'>
$ date +%s &gt; tex_filename.published
</pre>
<!--   l. 81   --><p class='nopar'>
</p><!--   l. 83   --><p class='indent'>   This command stores the current UNIX timestamp in the marker file. The build
script on the GitHub server can then compare this value with the file’s modification
time to decide whether recompilation is needed.
</p><!--   l. 87   --><p class='indent'>   Whether the <span class='ec-lmtt-10'>.published </span>file was created manually or by the <span class='ec-lmtt-10'>staticsite</span>
extension, make sure to commit it to the repository—GitHub Actions needs it to be
present during the build.

</p>   
<h4 class='subsectionHead' id='compilation-with-texlive-action'><span class='titlemark'>3.2   </span> <a id='x1-70003.2'></a>Compilation with TexLive Action</h4>
<!--   l. 93   --><p class='noindent'>The compilation process uses the <a href='https://github.com/xu-cheng/texlive-action'><span class='ec-lmtt-10'>xu-cheng/texlive-action</span></a> which provides a full
TeX Live environment. The workflow changes to the <span class='ec-lmtt-10'>texposts </span>directory and
executes the <span class='ec-lmtt-10'>rebuild.sh </span>script. This script handles the compilation of modified
LaTeX documents into HTML format by processing only the files that have changed
since the last build, ensuring efficient compilation of large documentation
projects.

</p>   
<h3 class='sectionHead' id='committing-generated-files-back-to-github'><span class='titlemark'>4   </span> <a id='x1-80004'></a>Committing Generated Files Back to GitHub</h3>
<!--   l. 101   --><p class='noindent'>Every build generates HTML and CSS files, and these are automatically
committed to the <span class='ec-lmtt-10'>html </span>branch for publishing with GitHub Pages, using the
<a href='https://github.com/stefanzweifel/git-auto-commit-action'><span class='ec-lmtt-10'>git-auto-commit-action</span></a>.
</p><!--   l. 105   --><p class='indent'>   A typical workflow step might look like this:
                                                                  

                                                                  
</p>   
<pre class='verbatim' id='verbatim-4'>
- name: Autocommit generated files
  uses: stefanzweifel/git-auto-commit-action@v4
  with:
    commit_message: "Save generated files"
    file_pattern: docs/*
    branch: html
    push_options: --force
</pre>
<!--   l. 115   --><p class='nopar'>
</p><!--   l. 117   --><p class='indent'>   This commits and pushes the generated files to the <span class='ec-lmtt-10'>html </span>branch automatically,
making them available to GitHub Pages.

</p>   
<h3 class='sectionHead' id='configure-github-pages'><span class='titlemark'>5   </span> <a id='x1-90005'></a>Configure Github Pages</h3>
<!--   l. 122   --><p class='noindent'>To configure GitHub Pages to serve content from the <span class='ec-lmtt-10'>docs </span>directory in the <span class='ec-lmtt-10'>html</span>
branch, follow these steps:
</p><!--   l. 124   --><p class='indent'>     
</p>
<ol class='enumerate1'>
<li class='enumerate' id='x1-9002x1'>Open your repository on GitHub.
</li>
<li class='enumerate' id='x1-9004x2'>Navigate to the <span class='ec-lmbx-10'>Settings </span>tab.
</li>
<li class='enumerate' id='x1-9006x3'>In the left-hand menu, select <span class='ec-lmbx-10'>Pages</span>.
</li>
<li class='enumerate' id='x1-9008x4'>     
<!--   l. 128   --><p class='noindent'>Under the <span class='ec-lmbx-10'>Source </span>section: </p>
                                                                  

                                                                  
<ul class='itemize1'>         
<li class='itemize'>Set the branch to <span class='ec-lmtt-10'>html</span>.
</li>
<li class='itemize'>Set the folder to <span class='ec-lmtt-10'>/docs</span>.</li></ul>
</li>
<li class='enumerate' id='x1-9010x5'>Click <span class='ec-lmbx-10'>Save</span>.</li></ol>
   
<h4 class='likesubsectionHead' id='accessing-your-blog'><a id='x1-10000'></a>Accessing your blog</h4>
<!--   l. 138   --><p class='noindent'>Once GitHub Pages is configured, your blog will be available at:
</p><!--   l. 140   --><p class='indent'>     
</p>
<blockquote class='quote'>     
<!--   l. 141   --><p class='noindent'><span class='ec-lmtt-10'>https://</span><span class='ec-lmtti-10'>username</span><span class='ec-lmtt-10'>.github.io/</span><span class='ec-lmtti-10'>repository-name</span><span class='ec-lmtt-10'>/</span></p></blockquote>
<!--   l. 144   --><p class='indent'>   For example, if your GitHub username is <span class='ec-lmtt-10'>janedoe </span>and your repository is named
<span class='ec-lmtt-10'>tex-blog</span>, the blog will be published at:
</p><!--   l. 146   --><p class='indent'>     
</p>
<blockquote class='quote'>     
<!--   l. 147   --><p class='noindent'><span class='ec-lmtt-10'>https://janedoe.github.io/tex-blog/</span></p></blockquote>
   
<h3 class='sectionHead' id='preventing-infinite-build-loops'><span class='titlemark'>6   </span> <a id='x1-110006'></a>Preventing Infinite Build Loops</h3>
<!--   l. 152   --><p class='noindent'>To prevent infinite build loops when generated files are committed back
to the repository, configure the workflow to ignore changes in the <span class='ec-lmtt-10'>docs/</span>
directory:
                                                                  

                                                                  
</p>   
<pre class='verbatim' id='verbatim-5'>
on:
  push:
    branches: [main]
    paths-ignore:
      - ’docs/**’
</pre>
<!--   l. 161   --><p class='nopar'>
</p><!--   l. 163   --><p class='indent'>   This ensures that commits containing only generated files won’t trigger new
workflow runs.
</p>   
 
